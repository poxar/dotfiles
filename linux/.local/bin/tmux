#!/bin/sh
set -eu
# Use XDG base dir compliant configuration
TMUX_DIR="${XDG_CONFIG_HOME:-"$HOME/.config"}/tmux"
TMUX_CMD="/usr/bin/tmux -f $TMUX_DIR/tmux.conf"

if test -z "$*"; then
  if $TMUX_CMD has-session; then
    exec $TMUX_CMD attach-session -d
  else
    WEECHAT_DIR="${XDG_CONFIG_HOME:-"$HOME/.config"}/weechat"
    $TMUX_CMD new-session -d -n weechat weechat --dir "$WEECHAT_DIR"
    $TMUX_CMD new-window
    exec $TMUX_CMD attach-session -d
  fi
else
  exec $TMUX_CMD "$@"
fi

#!/bin/sh
set -eu

cd "$HOME/Notes"

sel="$(find . \
    -not -path '*/.*' \
    -not -path './Archiv*' \
    -not -path './todo*' \
    -type f \
    -printf "%T@\t%p\n" \
    | sort -r -n \
    | awk -F '\t' '{ print $2 }' \
    | sed 's|^\./||' \
    | fuzzel --dmenu)"

if test -n "$sel"; then
  exec ghostty --working-directory="$HOME/Notes" -e nvim "$sel"
fi
